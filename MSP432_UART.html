<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<link rel="stylesheet" href="codemirror/theme/darcula.css" type="text/css"charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/lib/codemirror.css" type="text/css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/theme/dracula.css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/theme/eclipse.css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/addon/display/fullscreen.css" charset="UTF-8"></link>
<script language="javascript" type="text/javascript" src="codemirror/addon/display/fullscreen.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="codemirror/mode/clike/clike.js" charset="UTF-8"></script><script language="javascript"type="text/javascript" src="codemirror/mode/verilog/verilog.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="codemirror/lib/codemirror.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="js/cptxt.js" charset="GBK" defer></script>
<script language="javascript" type="text/javascript" src="js/menu.js"  charset="GBK" defer></script>
<head>
    <script language="javascript" type="text/javascript">
        function showdiv() {
            document.getElementById("bg").style.display ="block";
           
        }
        function hidediv() {
            document.getElementById("bg").style.display ='none';
        }
		function loading()
		{
			if(document.readyState == "complete")
				hidediv();
			else
				showdiv();
		}
		setInterval(function() {loading()},100);
    </script>
    <style type="text/css">
        #bg{ display: none;  
		position: fixed;  
		top: 0%;  left: 0%;  
		width: 100%;  
		height: 100%;  
		background-color: black;  
		z-index:1001;  
		-moz-opacity: 0.7;  
		opacity:.70;  
		filter: alpha(opacity=70);}
        #show{display: none;  
		position: fixed;  
		top: 25%;  
		left: 22%;  
		width: 53%;  
		height: 49%;  
		padding: 8px;  
		border: 8px solid #E8E9F7;  
		background-color: white;  
		z-index:1002;  
		overflow: auto;}
        /*遮罩图片居中显示*/
        .zhezhao{
            position: absolute;
            top:50%;
            left: 50%;
            transform: translate(-50%,-50%);
        }
		
    </style>
</head>
<head>
	 <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = 		'SyntaxHighlighter/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings = {//该为中文配置
            expandSource : '展开代码',
            viewSource : '查看代码',
            copyToClipboard : '复制代码',
            copyToClipboardConfirmation : '代码复制成功',
            print : '打印',
            help: '?',
            alert: '语法高亮\n\n',
            noBrush: '不能找到刷子: ',
            brushNotHtmlScript: '刷子没有配置html-script选项',
            aboutDialog: '<div></div>'
        };
	SyntaxHighlighter.all();
    </script> 
    <script>
		function clock_set(num)
		{
			if(num < 10)
			{
				return "0"+num;
			}
			else
			{
				return num;
			}
		}
		function gettime()
		{
			 var dat=new Date();
			 var hour= clock_set(dat.getHours());
			 var mint=clock_set(dat.getMinutes());
			 var second=clock_set(dat.getSeconds());
			 var time=hour+mint+second;
			 var txt = "";
			
			 if(hour>=9 && hour<12)
			 {
				txt = "上午"
			 }
			 else if(hour>=6 && hour<9)
			 {
				 txt = "早上"
			 }
			  else if(hour>=12 && hour<18)
			 {
				 txt = "下午"
			 }
			 else if(hour>=18 && hour<24)
			 {
				 txt = "晚上"
			 }
			 else
			 {
				 txt = "凌晨"
			 }
			 document.getElementById("showtime").innerHTML ="当前时间: "+txt+
			  hour+":"+mint+":"+second;
			 
		}
		setInterval(function() {gettime()},100);
		</script>
		
		<script language="javascript" type="text/javascript">
		function first_page(){
				window.location.href="GWJ_BLOG.html";
				}
		function about_author(){
			window.location.href="about_author.html";
		}
		function open_source(){
			window.location.href="open_source.html";
		}
		function com_author(){
			window.location.href="com_author.html";
		}
		</script>
		
		<script language="javascript" type="text/javascript">
			
	
		setInterval(function() {menu_refresh()},100);//刷新左侧表单按键
	</script>
    
    
    <style type="text/css">
		._select_button {font-size:18px;
						background-color:#A5DF00;
						width:80%;
						}
		._display {margin-left: 20px}
	</style>
</head>


<body background="pic/bg.png">
<p id="test">11</p>
   <div id="bg" @touchmove.prevent>
    <img class="zhezhao" src="pic/loading.gif">
   </div>    <!-- 遮罩层  -->
	
	<div style="width:auto;heigth:10%;background-color:#0B610B;">
    
    	<p>&nbsp;</p>
        
        <p style="width: auto; text-align: left; font-size: 30px; float: right; text-align: right; color: #FFF; background-color: #0B610B; font-family: 隶书;">
            &nbsp;<b>不积跬步,&nbsp;&nbsp;<br>
            无以至千里!&nbsp;&nbsp;</b>
        </p>
         
    	<h1 style="color:blue;width:auto;font-family:隶书;font-size:50px;">
            &nbsp;
            <img src="pic/headpic.jpg" width="80" height="80" style="border-width: 3px; border: solid #0000FF ;" />
            <b>猫巾的博客</b>
        </h1> 
       
        <p style="width:auto;text-align:left;font-size:12px;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        网址:&nbsp;&nbsp;<a href="http://hihii11.github.io/GWJ_BLOG.html">http://hihii11.github.io/GWJ_BLOG.html</a>
        </p>
         
        <p id="showtime" style="width:%20;text-align:right;font-size:14px;color: 	#A5DF00;">		 			<b></b>
        </p>
        
    </div>
    
  
<div style="clear:both"> <hr />
</div>



	<div style="clear:both;background-color:#E0E0E0;">
    <button type="button" onclick="first_page()" style="font-size:18px;"><b>首页</b></button>
    <button type="button" onclick="about_author()" style="font-size:16px;"><b>关于作者</b></button>
    <button type="button" onclick="open_source()" style="font-size:16px;"><b>开源资料</b></button>
    <button type="button" onclick="com_author()" style="font-size:16px;"><b>联系博主</b></button>
    </div>
    
    <div>
        <div>&nbsp;</div>
        <div style="float:left;background-color: #04B431;width:26%">
        <div>
        <select id="menu" onclick="menu_refresh()" style="text-align:center;font-size:19px;">
              <option onclick="menu_refresh()" value ="MSP432基础函数库"><b>MSP432基础函数库</b></option>
              <option onclick="menu_refresh()" value ="MSP432主控板"><b>MSP432主控板</b></option>
              <option onclick="menu_refresh()" value="verilog"><b>verilog</b></option>

              <option onclick="menu_refresh()" value="上位机"><b>上位机</b></option>
               <option onclick="menu_refresh()" value="智能车竞赛"><b>智能车竞赛</b></option>
        </select>
        </div>
   
    
    	 
    	 <button id="b0" type="button" onclick="b0_func()" class="_select_button"><b>总览</b></button>
         <button id="b1" type="button" onclick="b1_func()" class="_select_button"><b>主频设置</b></button>
         <button id="b2" type="button" onclick="b2_func()" class="_select_button"><b>GPIO</b></button>
          <button id="b3" type="button" onclick="b3_func()" class="_select_button"><b>GPIO中断</b></button>
         <button id="b4" type="button" onclick="b4_func()" class="_select_button"><b>定时器中断</b></button>
          <button id="b5" type="button" onclick="b5_func()" class="_select_button"><b>UART串口</b></button>
           <button id="b6" type="button" onclick="b6_func()" class="_select_button"><b>模拟IIC</b></button>
            <button id="b7" type="button" onclick="b7_func()" class="_select_button"><b>ADC14</b></button>
         <button id="b8" type="button" onclick="b8_func()" class="_select_button"><b>PWM波</b></button>
         <button id="b9" type="button" onclick="b9_func()" class="_select_button"><b>蜂鸣器</b></button>
         <button id="b10" type="button" onclick="b10_func()" class="_select_button"><b>旋转编码开关</b></button>
         <button id="b11" type="button" onclick="b11_func()" class="_select_button"><b>EEPROM</b></button>
         <button id="b12" type="button" onclick="b12_func()" class="_select_button"><b>ADC0832</b></button>
         <button id="b13" type="button" onclick="b13_func()" class="_select_button"><b>虚拟示波器</b></button>
         <button id="b14" type="button" onclick="b14_func()" class="_select_button"><b>电机</b></button>
         <button id="b15" type="button" onclick="b15_func()" class="_select_button"><b>舵机</b></button>
         <button id="b16" type="button" onclick="b16_func()" class="_select_button"><b>PID控制</b></button>
    	</div>
        
        
        
        
     <div style="float:right;width:70%;border-width: 5px; border: solid  	#F8F8F8  ;background-color:#FFFFFF;">
        <div align=center>
        <p id="title" style="width:50%;font-size:36px;"><b>UART通信说明</b></p></div><hr />
        <div id="article" style="_article">
        <p>
        	<font style="font-size:22px;">
            	&emsp;&emsp;有关MSP432串口的函数库及头文件声明:exinuart.c exinuart.h
                &emsp;&emsp;<br>
                &emsp;&emsp;相关重要函数说明：<br>
        </p></div>
        
        
       <p style="font-size:22px;">
        	&emsp;&emsp;1.串口初始化函数。<br>
            &emsp;&emsp;值得注意的是本函数将根据填写的波特率进行对时钟源的自动选择，故如果修改了SMCLK或ACLK时钟，应在exinsystem.h文件中对这两个时钟源的频率宏定义进行更改，才可正确计算波特率分频。
            注：若SMCLK<=3Mhz ,则Baunds参数应小于230400
        </p></font>
        <div align="right">
         <button type="button" onclick=" cp_code(editor)" style="background:black;color:white;" ><b>复制代码</b></button></div>
       <textarea id="code0" name="code0">
/*************************************************
 * 函  数  名:UART_init
 * 功       能:串口初始化
 * 参       数:UART_CHA:UART可选通道，在exinuart.h中列出
 *          Baunds:波特率填写
 * 注意事项:无
 *************************************************/
void UART_init(UART_CHA_enum UART_CHA,int Baunds )
{
    UART_PIN_sel(UART_CHA);//初始化对应端口
    __enable_interrupt();//使能总中断
    UART_IRQ_set(UART_CHA);//设置中断优先级
    if((SMCLK_FRE/Baunds)>>4 > 0xff)
    {
        UART_CLK_sel(UART_CHA,UART_ACLK);//选择UART时钟为ACLK
        BRCLK = ACLK_FRE;
    }
    else
    {
        UART_CLK_sel(UART_CHA,UART_SMCLK);//选择UART时钟为SMCLK
        BRCLK = SMCLK_FRE;
    }
    UART_Baunds_set(UART_CHA,Baunds);//绑定波特率
    UART_USIC_init(UART_CHA);//初始化eUSCI
    UART_IRQRX_set(UART_CHA);//接收中断使能

}
</textarea>
     
      <p style="font-size:22px;">
        	&emsp;&emsp;2.发送单字节<br>
       </p>
<div align="right">
         <button type="button" onclick=" cp_code(editor1)" style="background:black;color:white;" ><b>复制代码</b></button></div>
<textarea id="code1" name="code1">
/*************************************************
 * 函  数  名:UART_send_Byte
 * 功       能:发送一个字节数据
 * 参       数:UART_CHA:UART可选通道，在exinuart.h中列出
 *          Data:要发送的8位数据
 * 注意事项:无
 *************************************************/
void UART_send_Byte(UART_CHA_enum UART_CHA,uint8 Data)
{
    switch(UART_CHA)
    {
               case(UART0):while(!(EUSCI_A0->IFG&EUSCI_A_IFG_TXIFG));//等待上一次发送完成
                           EUSCI_A0->TXBUF = Data;
                           break;
               case(UART1):
                           while(!(EUSCI_A1->IFG&EUSCI_A_IFG_TXIFG));//等待上一次发送完成
                           EUSCI_A1->TXBUF = Data;
                           break;
               case(UART2):
                           while(!(EUSCI_A2->IFG&EUSCI_A_IFG_TXIFG));//等待上一次发送完成
                           EUSCI_A2->TXBUF = Data;
                           break;
               case(UART3):
                           while(!(EUSCI_A3->IFG&EUSCI_A_IFG_TXIFG));//等待上一次发送完成
                           EUSCI_A3->TXBUF = Data;
                           break;
               default:;
    }
}
</textarea>
    <p style="font-size:22px;">   
        3.发送字符串。<br></p>
<div align="right">
         <button type="button" onclick=" cp_code(editor2)" style="background:black;color:white;" ><b>复制代码</b></button></div>       
<textarea id="code2" name="code2">
/*************************************************
 * 函  数  名:UART_send_string
 * 功       能:发送一个字符串
 * 参       数:UART_CHA:UART可选通道，在exinuart.h中列出
 *          txt:所要发送的字符串
 * 注意事项:无
 *************************************************/
void UART_send_string(UART_CHA_enum UART_CHA,char*txt)
{
    int i;
    for(i=0;txt[i];i++) {UART_send_Byte(UART_CHA,txt[i]);}
}
</textarea>
 
  <p style="font-size:22px;">
        	&emsp;&emsp;4.接收单字节。<br>
       	    &emsp;&emsp;该函数应与串口接收中断服务函数配合使用。
       </p>   
<div align="right">
         <button type="button" onclick=" cp_code(editor3)" style="background:black;color:white;" ><b>复制代码</b></button></div>
 <textarea id="code3" name="code3">  
/*************************************************
 * 函  数  名:UART_recv_Byte
 * 功       能:接收一个字节数据
 * 参       数:UART_CHA:UART可选通道，在exinuart.h中列出
 * 注意事项:无
 *************************************************/
uint8 UART_recv_Byte(UART_CHA_enum UART_CHA)
{
    uint8 result;
    switch(UART_CHA)
   {
              case(UART0):result = EUSCI_A0->RXBUF; break;//取出缓冲区数据
              case(UART1):result = EUSCI_A1->RXBUF; break;//取出缓冲区数据
              case(UART2):result = EUSCI_A2->RXBUF; break;//取出缓冲区数据
              case(UART3):result = EUSCI_A3->RXBUF; break;//取出缓冲区数据
              default:;
   }
    return result;
}
      </textarea>
         <p style="font-size:22px;">
                &emsp;&emsp;5.中断服务函数<br>
               &emsp;&emsp;MSP432串口资源共四个，为EUSCI_A0~EUSCI_A3,故中断服务函数有四个。
        </p>
<div align="right">
         <button type="button" onclick=" cp_code(editor4)" style="background:black;color:white;" ><b>复制代码</b></button></div>        
 <textarea id="code4" name="code4">  
/*************************************************
 * 函  数  名:EUSCIA0_IRQHandler
 * 功       能:串口0服务函数
 * 参       数:无
 * 注意事项:无
 *************************************************/
void EUSCIA0_IRQHandler(void)
{
    if (EUSCI_A0->IFG & EUSCI_A_UART_RECEIVE_INTERRUPT_FLAG)
    {
        /***********************以下添加用户的处理函数*********************/
        
        /***********************用户处理函数添加结束行*********************/
    }
}
/*************************************************
 * 函  数  名:EUSCIA1_IRQHandler
 * 功       能:串口1服务函数
 * 参       数:无
 * 注意事项:无
 *************************************************/
void EUSCIA1_IRQHandler(void)
{
    if (EUSCI_A1->IFG & EUSCI_A_UART_RECEIVE_INTERRUPT_FLAG)
    {
        /***********************以下添加用户的处理函数*********************/

        /***********************用户处理函数添加结束行*********************/
    }
}
/*************************************************
 * 函  数  名:EUSCIA2_IRQHandler
 * 功       能:串口2服务函数
 * 参       数:无
 * 注意事项:无
 *************************************************/
void EUSCIA2_IRQHandler(void)
{
    //接收中断,uart接收到字节,接收中断标志位会置1
    if(EUSCI_A2->IFG & EUSCI_A_UART_RECEIVE_INTERRUPT_FLAG)
    {
        /***********************以下添加用户的处理函数*********************/

        /***********************用户处理函数添加结束行*********************/
    }
}
/*************************************************
 * 函  数  名:EUSCIA3_IRQHandler
 * 功       能:串口3服务函数
 * 参       数:无
 * 注意事项:无
 *************************************************/
void EUSCIA3_IRQHandler()
{
    if(EUSCI_A3->IFG & EUSCI_A_UART_RECEIVE_INTERRUPT_FLAG)
    {
        /***********************以下添加用户的处理函数*********************/

        /***********************用户处理函数添加结束行*********************/
    }
}
 </textarea> 
  <p style="font-size:22px;">
                应用举例:
                1.将从串口上位机接收到数据回传。
        </p>
<div align="right">
         <button type="button" onclick=" cp_code(editor5)" style="background:black;color:white;" ><b>复制代码</b></button></div>        
 <textarea id="code5" name="code5">  
//首先是主函数中的初始化配置
 #include "exinlibs\headfile.h"//务必将库中的headfile.h文件包含进来

 void main()
 {
    system_init(0);
    set_DCO_48MH();//将MSP432主频设置为48Mhz
    /*****模块初始化程序*****/0ms
    UART_init(UART0,115200);//初始化串口0，对应launchpad usb接口 波特率115200
    /*****模块初始化程序*****/
    delay_ms(1000);
    UART_send_string(UART0,"HELLO_EXIN\n");//延时一秒后向上位机发送"HELLO_EXIN\n"字符串
    while(1);            
 }
  </textarea>  
  
   <p style="font-size:22px;">
               中断函数中代码：
        </p>
<div align="right">
         <button type="button" onclick=" cp_code(editor6)" style="background:black;color:white;" ><b>复制代码</b></button></div>        
   <textarea id="code6" name="code6">  
   /*************************************************
 * 函  数  名:EUSCIA3_IRQHandler
 * 功       能:串口3服务函数
 * 参       数:无
 * 注意事项:无
 *************************************************/
void EUSCIA3_IRQHandler()
{
    if(EUSCI_A3->IFG & EUSCI_A_UART_RECEIVE_INTERRUPT_FLAG)
    {
        /***********************以下添加用户的处理函数*********************/
 		UART_send_Byte(UART0,UART_recv_Byte(UART0));//将从串口上位机中接收到的数据回传
        /***********************用户处理函数添加结束行*********************/
    }
}
   </textarea>
   <p style="font-size:22px;">
  需要注意，在上位机中的波特率选择，也需要与MSP432 UART0的波特率相同，即115200。具体哪个端口可以通过设备管理器查看。</p>
     </div>
     
    <div style="clear:both;">&nbsp;</div>
    
        <div style="width:auto;heigth:10%;background-color:#0B610B;">
    <p style="font-size:10px;">&nbsp;</p>
    <p style="text-align:center;font-size:16px;color:#FFF;"><b>2022年1月创 于 Github管理<br>
    http://hihii11.github.io/GWJ_BLOG.html<br>
    @猫巾<br>&nbsp;
    </b></p>
    </div>

<p id="copy_textarea" style="display:none;">
    复制区域
</p><!--复制区-->


<body>   
</html>
 <script type="text/javascript">
           var editor = CodeMirror.fromTextArea(document.getElementById("code0"),
		    {
            mode: "text/x-csrc",
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
			fullScreen:true,
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		  var editor1 = CodeMirror.fromTextArea(document.getElementById("code1"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		   var editor2 = CodeMirror.fromTextArea(document.getElementById("code2"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		   var editor3 = CodeMirror.fromTextArea(document.getElementById("code3"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		    var editor4 = CodeMirror.fromTextArea(document.getElementById("code4"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		    var editor5 = CodeMirror.fromTextArea(document.getElementById("code5"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		    var editor6 = CodeMirror.fromTextArea(document.getElementById("code6"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
</script>
