<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" href="codemirror/theme/darcula.css" type="text/css"charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/lib/codemirror.css" type="text/css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/theme/dracula.css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/theme/eclipse.css" charset="UTF-8"></link>
<link rel="stylesheet" href="codemirror/addon/display/fullscreen.css" charset="UTF-8"></link>
<script language="javascript" type="text/javascript" src="codemirror/addon/display/fullscreen.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="codemirror/mode/clike/clike.js" charset="UTF-8"></script><script language="javascript"type="text/javascript" src="codemirror/mode/verilog/verilog.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="codemirror/lib/codemirror.js" charset="UTF-8"></script>
<script language="javascript" type="text/javascript" src="js/cptxt.js" charset="UTF-8" defer></script>
<script language="javascript" type="text/javascript" src="js/menu.js"  charset="UTF-8" defer></script>
<script language="javascript" type="text/javascript" src="js/gettime.js"  charset="UTF-8" defer></script>
<script language="javascript" type="text/javascript" src="js/title_sel.js"  charset="UTF-8" defer></script>
<link rel="stylesheet" href="css/mousebrush.css" charset="UTF-8"></link>
<script language="javascript" type="text/javascript" src="js/getmouse.js"  charset="UTF-8" defer></script>
<head>
    <script language="javascript" type="text/javascript">
        function showdiv() {
            document.getElementById("bg").style.display ="block";
           
        }
        function hidediv() {
            document.getElementById("bg").style.display ='none';
        }
		function loading()
		{
			if(document.readyState == "complete")
				hidediv();
			else
				showdiv();
		}
		setInterval(function() {loading()},100);
    </script>
    <style type="text/css">
        #bg{ display: none;  
		position: fixed;  
		top: 0%;  left: 0%;  
		width: 100%;  
		height: 100%;  
		background-color: black;  
		z-index:1001;  
		-moz-opacity: 0.7;  
		opacity:.70;  
		filter: alpha(opacity=70);}
        #show{display: none;  
		position: fixed;  
		top: 25%;  
		left: 22%;  
		width: 53%;  
		height: 49%;  
		padding: 8px;  
		border: 8px solid #E8E9F7;  
		background-color: white;  
		z-index:1002;  
		overflow: auto;}
        /*遮罩图片居中显示*/
        .zhezhao{
            position: absolute;
            top:50%;
            left: 50%;
            transform: translate(-50%,-50%);
        }
		
    </style>
</head>

<head>
	 <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = 		'SyntaxHighlighter/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings = {//该为中文配置
            expandSource : '展开代码',
            viewSource : '查看代码',
            copyToClipboard : '复制代码',
            copyToClipboardConfirmation : '代码复制成功',
            print : '打印',
            help: '?',
            alert: '语法高亮\n\n',
            noBrush: '不能找到刷子: ',
            brushNotHtmlScript: '刷子没有配置html-script选项',
            aboutDialog: '<div></div>'
        };
	SyntaxHighlighter.all();
    </script> 
    
	<script language="javascript" type="text/javascript">
			
		setInterval(function() {gettime()},100);
		setInterval(function() {menu_refresh()},100);//刷新上方表单按键
	</script>
    
    <style type="text/css">
		._select_button {font-size:18px;
						background-color:#A5DF00;
						width:80%;
						}
		._display {margin-left: 20px}
	</style>
</head>

<body  onmousedown="onmousedown1()" onmouseup="tiononmouseup1()"  background="pic/bg.png">
    <div id="mousebrush" style="position: absolute;top: 0%;left: 0%;z-index:-2; ">
        <div style=" width: 100%; height: 100%; position: absolute;z-index=-2;">
          <canvas id="tutorial" width="1860px" height="2050px" style="z-index=-2;">
        </div>
        <div style="position: relative;z-index=-2;">
        
        </div>
    </div> 
	  <div id="bg" @touchmove.prevent>
    <img class="zhezhao" src="pic/loading.gif">
   </div>    <!-- 遮罩层  -->
	<div style="width:auto;heigth:10%;background-color:#0B610B;">
    
    	<p>&nbsp;</p>
        
        <p style="width: auto; text-align: left; font-size: 30px; float: right; text-align: right; color: #FFF; background-color: #0B610B; font-family: 隶书;">
            &nbsp;<b>不积跬步,&nbsp;&nbsp;<br>
            无以至千里!&nbsp;&nbsp;</b>
        </p>
         
    	<h1 style="color:blue;width:auto;font-family:隶书;font-size:50px;">
            &nbsp;
            <img src="pic/headpic.jpg" width="80" height="80" style="border-width: 3px; border: solid #0000FF ;" />
            <b>猫巾的博客</b>
        </h1> 
       
        <p style="width:auto;text-align:left;font-size:12px;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        网址:&nbsp;&nbsp;<a href="http://hihii11.github.io/GWJ_BLOG.html">http://hihii11.github.io/GWJ_BLOG.html</a>
        </p>
         
        <p id="showtime" style="width:%20;text-align:right;font-size:14px;color: 	#A5DF00;">		 			<b></b>
        </p>
        
    </div>
    
  
<div style="clear:both"> <hr />
</div>



	<div style="clear:both;background-color:#E0E0E0;">
    <button type="button" onclick="first_page()" style="font-size:18px;"><b>首页</b></button>
    <button type="button" onclick="about_author()" style="font-size:16px;"><b>关于作者</b></button>
    <button type="button" onclick="open_source()" style="font-size:16px;"><b>开源资料</b></button>
    <button type="button" onclick="com_author()" style="font-size:16px;"><b>联系博主</b></button>
    </div>
    
    <div>
        <div>&nbsp;</div>
        <div style="float:left;background-color: #04B431;width:26%">
        <div>
        <select id="menu" style="text-align:center;font-size:19px;">
              <option value ="MSP432基础函数库"><b>MSP432基础函数库</b></option>
              <option value ="MSP432主控板"><b>MSP432主控板</b></option>
              <option value="verilog"><b>verilog</b></option>

              <option value="上位机"><b>上位机</b></option>
               <option value="智能车竞赛"><b>智能车竞赛</b></option>
        </select>
        </div>
   
    
    	 
    	 <button id="b0" type="button" onclick="b0_func()" class="_select_button"><b>总览</b></button>
         <button id="b1" type="button" onclick="b1_func()" class="_select_button"><b>主频设置</b></button>
         <button id="b2" type="button" onclick="b2_func()" class="_select_button"><b>GPIO</b></button>
          <button id="b3" type="button" onclick="b3_func()" class="_select_button"><b>GPIO中断</b></button>
         <button id="b4" type="button" onclick="b4_func()" class="_select_button"><b>定时器中断</b></button>
          <button id="b5" type="button" onclick="b5_func()" class="_select_button"><b>UART串口</b></button>
           <button id="b6" type="button" onclick="b6_func()" class="_select_button"><b>模拟IIC</b></button>
            <button id="b7" type="button" onclick="b7_func()" class="_select_button"><b>ADC14</b></button>
         <button id="b8" type="button" onclick="b8_func()" class="_select_button"><b>PWM波</b></button>
         <button id="b9" type="button" onclick="b9_func()" class="_select_button"><b>蜂鸣器</b></button>
         <button id="b10" type="button" onclick="b10_func()" class="_select_button"><b>旋转编码开关</b></button>
         <button id="b11" type="button" onclick="b11_func()" class="_select_button"><b>EEPROM</b></button>
         <button id="b12" type="button" onclick="b12_func()" class="_select_button"><b>ADC0832</b></button>
         <button id="b13" type="button" onclick="b13_func()" class="_select_button"><b>虚拟示波器</b></button>
         <button id="b14" type="button" onclick="b14_func()" class="_select_button"><b>电机</b></button>
         <button id="b15" type="button" onclick="b15_func()" class="_select_button"><b>舵机</b></button>
         <button id="b16" type="button" onclick="b16_func()" class="_select_button"><b>PID控制</b></button>
    	</div>
        
        
     
      
     <div class="mousediv" style="float:right;width:70%; ">
        <div align=center>
        <p id="title" style="width:50%;font-size:36px;"><b>ADC0832拓展AD口说明</b></p></div><hr />
        <div id="article" style="_article" >
        <p>
        	<font style="font-size:22px;">
            	&emsp;&emsp;有关MSP432 ADC0832的函数库及头文件声明:exinADC0832.c exinADC0832.h。<br>
                &emsp;&emsp;本函数库适用于ADC0832，以2型板为例，其电路如图所示。若要使用ADC0832拓展AD口，则需要将J1跳线接至高电平。<br>
                <div align="center">
          <img src="pic/ADC0832.png" width="480" height="380" style="border-width: 3px; border: solid #0000FF ;" /></div>
         <div align="center">
  
        </div>
                &emsp;&emsp;相关重要函数说明：<br>
        </p></div>
        
        
       <p style="font-size:22px;">
        	&emsp;&emsp;1.ADC0832初始化函数。<br>
        </p></font>
        
        
<div align="right">       
<button type="button" onclick=" cp_code(editor)" style="background:black;color:white;" ><b>复制代码</b></button></div>
<textarea id="code0" name="code0">
/*************************************************
 * 函  数  名:ADC0832_init
 * 功       能:ADC0832驱动引脚初始化
 * 参       数:ADC0832_CHA:ADC0832通道选择变量
 * 注意事项:
 *      ADC0832的可选通道已在exinADC0832.h中列出
 *      可选通道:
 *              CH0~CH3
 *      当选择CH0、CH1时会对第一片ADC0832进行初始化
 *      当选择CH2、CH3时会对第二片ADC0832进行初始化
 *************************************************/
void ADC0832_init(ADC0832_CH ADC0832_CHA)
{
    if(ADC0832_CHA == CH0 || ADC0832_CHA == CH1)//初始化第一片ADC0832
    {
        DI0_OUT;
        DO0_IN;
        CK0_OUT;
        CS0_OUT;
    }
    else//初始化第二片ADC0832
    {
        DI1_OUT;
        DO1_IN;
        CK1_OUT;
        CS1_OUT;
    }
}
</textarea>
 
      <p style="font-size:22px;">
        	&emsp;&emsp;2.ADC0832读取一次单通道数据。<br>
       </p>
<div align="right">       
<button type="button" onclick=" cp_code(editor1)" style="background:black;color:white;" ><b>复制代码</b></button></div>
<textarea id="code1" name="code1">
/*************************************************
 * 函  数  名:ADC0832_read_Byte
 * 功       能:ADC0832芯片进行一次转换并读取转换结果
 * 参       数:ADC0832_CHA:ADC0832通道选择变量
 *          ADC0832_MODE:芯片工作方式
 *                 CHECK:校验使能端
 * 注意事项:
 *      ADC0832的可选通道已在exinADC0832.h中列出
 *      可选通道:
 *              CH0~CH3
 *      ADC0832的可选工作方式已在exinADC0832.h中列出
 *      ADC0832_MODE = SINGLE 时，则进行单通道采样
 *      此时CH0~CH4都可作为信号输入通道
 *
 *      当ADC0832_MODE = DUAL 时，则进入双通道模式，
 *      此时CH0与CH1作为一个通道
 *          CH2与CH3作为一个通道，且在这种情况下，通道
 *          的正相输入端由ADC0832_CHA参数指定
 *
 *          具体参数组合与对应的返回值如下表
 *          ________________________________________________________________________________________
 *         |   ADC0832_CHA    |   ADC0832_MODE   |  CH0  |  CH1 |  CH2 |  CH3 |  函数返回值                 |
 *         |__________________|__________________|_______|______|______|______|_____________________|
 *         |      CH0         |      SINGLE      |   +   |      |      |      |CH0单通道采样值           |
 *         |      CH1         |      SINGLE      |       |   +  |      |      |CH1单通道采样值           |
 *         |      CH2         |      SINGLE      |       |      |   +  |      |CH2单通道采样值           |
 *         |      CH3         |      SINGLE      |       |      |      |   +  |CH3单通道采样值           |
 *         |      CH0         |      DULE        |   +   |   -  |      |      |(CH0-CH1)双通道采样值|
 *         |      CH1         |      DULE        |   -   |   +  |      |      |(CH1-CH0)双通道采样值|
 *         |      CH2         |      DULE        |       |      |   +  |   -  |(CH2-CH3)双通道采样值|
 *         |      CH3         |      DULE        |       |      |   -  |   +  |(CH3-CH2)双通道采样值|
 *         —————————————————————————————————————————————————————————————————————————————————————————
 *************************************************/
uint8 ADC0832_read_Byte(ADC0832_CH ADC0832_CHA , ADC0832_MOD ADC0832_MODE , uint8 CHECK)
{
    static uint8 value;
    uint8 data0 = 0;
    uint8 data1 = 0;
    uint8 i;
    ADC0832_enable(ADC0832_CHA);//使能对应ADC0832
    ADC0832_CHA_sel(ADC0832_CHA , ADC0832_MODE);//进行通道与模式的选择
    if(ADC0832_CHA == CH0 ||ADC0832_CHA == CH1)//读第一片
    {
        for(i=0;i<8;i++)
       {
            CK0_LOW;
            ADC0832_delay;
            CK0_HIGH;
            ADC0832_delay;
            CK0_LOW;
            ADC0832_delay;
           if(DO0_READ)
               data0 = data0<<1|0x01;
           else
               data0 = data0<<1;
       }
    }
    else//读第二片
    {
        for(i=0;i<8;i++)
        {
             CK1_LOW;
             ADC0832_delay;
             CK1_HIGH;
             ADC0832_delay;
             CK1_LOW;
             ADC0832_delay;
            if(DO1_READ)
                data0 = data0<<1|0x01;
            else
                data0 = data0<<1;
        }
    }


    if(CHECK == 0)//不进行校验
    {
        value = data0;
    }
    else if(CHECK == 1)//进行校验
    {

          if(ADC0832_CHA == CH0 ||ADC0832_CHA == CH1)//读第一片
          {
              for(i=0;i<8;i++)
              {
                 if(DO0_READ)
                   data1 = data1>>1|0x80;
                 else
                   data1 = data1>>1;


                  CK0_LOW;
                  ADC0832_delay;
                  CK0_HIGH;
                  ADC0832_delay;
                  CK0_LOW;
                  ADC0832_delay;
              }
          }
          else//读第二片
          {
                for(i=0;i<8;i++)
                {
                   if(DO1_READ)
                     data1 = data1>>1|0x80;
                   else
                     data1 = data1>>1;


                    CK1_LOW;
                    ADC0832_delay;
                    CK1_HIGH;
                    ADC0832_delay;
                    CK1_LOW;
                    ADC0832_delay;
                }
          }

          if(data0 == data1)
              value = data0;
          else
              value = value;
    }
    ADC0832_disable(ADC0832_CHA);//禁能对应ADC0832
    return value;
}
</textarea>

  <p style="font-size:22px;">
        	&emsp;&emsp;应用举例:<br>
            &emsp;&emsp;ADC0832读写例程<br>
需要将开发板上J1跳线端接至H，来访问ADC0832<br>
此例程将采集CH0-CH3的AD值，并在OLED上显示<br>
       </p>
<div align="right">       
<button type="button" onclick=" cp_code(editor2)" style="background:black;color:white;" ><b>复制代码</b></button></div>
<textarea id="code2" name="code2">
#include "exinlibs\headfile.h"

unsigned char txt_ADC0832[20]={};



uint8  CH0_dat,CH1_dat,CH2_dat,CH3_dat;//存放4个通道的AD转换值
float  CH0_vol,CH1_vol,CH2_vol,CH3_vol;//存放计算得到的电压值


void ADC_run()
{
           //接收原始数据
           CH0_dat =ADC0832_read_Byte(CH0 , SINGLE , 0);   //CH0采样通道  单通道采样   不进行数据校验
           CH1_dat =ADC0832_read_Byte(CH1 , SINGLE , 0);   //CH1采样通道  单通道采样   不进行数据校验
           CH2_dat =ADC0832_read_Byte(CH2 , SINGLE , 0);   //CH0采样通道  单通道采样   不进行数据校验
           CH3_dat =ADC0832_read_Byte(CH3 , SINGLE , 0);   //CH0采样通道  单通道采样   不进行数据校验

           //换算电压
           CH0_vol = get_voltage(CH0_dat , ADC0832_VREF , ADC0832_PREC);//通道0转换   参考电压5V 分辨率256
           CH1_vol = get_voltage(CH1_dat , ADC0832_VREF , ADC0832_PREC);//通道0转换   参考电压5V 分辨率256
           CH2_vol = get_voltage(CH2_dat , ADC0832_VREF , ADC0832_PREC);//通道0转换   参考电压5V 分辨率256
           CH3_vol = get_voltage(CH3_dat , ADC0832_VREF , ADC0832_PREC);//通道0转换   参考电压5V 分辨率256

}

void ADC0832_show()
{

    sprintf(txt_ADC0832,"CH0:  %d  %.2f",CH0_dat,CH0_vol);
    OLED_ShowString(0,1,txt_ADC0832);

    sprintf(txt_ADC0832,"CH1:  %d  %.2f",CH1_dat,CH1_vol);
    OLED_ShowString(0,2,txt_ADC0832);

    sprintf(txt_ADC0832,"CH2:  %d  %.2f",CH2_dat,CH2_vol);
    OLED_ShowString(0,3,txt_ADC0832);

    sprintf(txt_ADC0832,"CH3:  %d  %.2f",CH3_dat,CH3_vol);
    OLED_ShowString(0,4,txt_ADC0832);
}

void main()
{
    system_init(0);
    OLED_Init();//OLED初始化
    OLED_Clear();//清屏

   //ADC引脚初始化
    ADC0832_init(CH0);
    ADC0832_init(CH1);
    ADC0832_init(CH2);
    ADC0832_init(CH3);

    OLED_ShowString(0,0,"CHA");OLED_ShowString(50,0,"val");OLED_ShowString(90,0,"u(v)");//打印表头
    while(1)
    {
        ADC_run();ADC0832_show();
    }
}
</textarea>
 
     
   <p style="font-size:22px;">
   
  </p>
     </div>
     
    <div style="clear:both;">&nbsp;</div>
    
        <div style="width:auto;heigth:10%;background-color:#0B610B;">
    <p style="font-size:10px;">&nbsp;</p>
    <p style="text-align:center;font-size:16px;color:#FFF;"><b>2022年1月创 于 Github管理<br>
    http://hihii11.github.io/GWJ_BLOG.html<br>
    @猫巾<br>&nbsp;
    </b></p>
    </div>
<p id="copy_textarea" style="display:none;">
    复制区域
</p><!--复制区-->

</body>   
</html>

 <script type="text/javascript">
           var editor = CodeMirror.fromTextArea(document.getElementById("code0"),
		    {
            mode: "text/x-csrc",
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
			fullScreen:true,
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		  var editor1 = CodeMirror.fromTextArea(document.getElementById("code1"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		   var editor2 = CodeMirror.fromTextArea(document.getElementById("code2"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		   var editor3 = CodeMirror.fromTextArea(document.getElementById("code3"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		  var editor4 = CodeMirror.fromTextArea(document.getElementById("code4"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		  var editor5 = CodeMirror.fromTextArea(document.getElementById("code5"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
		  var editor6 = CodeMirror.fromTextArea(document.getElementById("code6"),
		    {
            mode:'text/x-csrc',
            lineNumbers: true,  //显示行号
			styleActiveLine: true, 
            theme: "dracula", //设置主题
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
          });
</script>
    <script language="javascript" type="text/javascript" src="js/mousebrush.js"  charset="UTF-8" defer></script>
</body>
</html>
